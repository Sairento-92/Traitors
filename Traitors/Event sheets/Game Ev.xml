<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>Game Ev</name>
    <events>
        <event-block sid="9039691141819464">
            <conditions>
                <condition id="-2" name="On start of layout" sid="7806081716080559" type="System" />
            </conditions>
            <actions>
                <action id="1" name="Connect" sid="8675285541643237" type="Multiplayer">
                    <param id="0" name="Server">&quot;wss://multiplayer.scirra.com&quot;</param>
                </action>
                <action id="15" name="Add client input value" sid="3547463492851685" type="Multiplayer">
                    <param id="0" name="Tag">&quot;aimx&quot;</param>
                    <param id="1" name="Precision">2</param>
                    <param id="2" name="Interpolation">1</param>
                </action>
                <action id="15" name="Add client input value" sid="6005104961656681" type="Multiplayer">
                    <param id="0" name="Tag">&quot;aimy&quot;</param>
                    <param id="1" name="Precision">2</param>
                    <param id="2" name="Interpolation">1</param>
                </action>
                <action id="15" name="Add client input value" sid="167538176477478" type="Multiplayer">
                    <param id="0" name="Tag">&quot;input&quot;</param>
                    <param id="1" name="Precision">3</param>
                    <param id="2" name="Interpolation">0</param>
                </action>
                <action id="11" name="Sync object" sid="9791612112439642" type="Multiplayer">
                    <param id="0" name="Object">Gracz</param>
                    <param id="1" name="Data">1</param>
                    <param id="2" name="Precision">2</param>
                    <param id="3" name="Bandwidth">0</param>
                </action>
                <action id="12" name="Sync instance variable" sid="5848349262294856" type="Multiplayer">
                    <param id="0" name="Object">Gracz</param>
                    <param id="1" name="Instance variable">Gracz|aimX</param>
                    <param id="2" name="Precision">2</param>
                    <param id="3" name="Interpolation">1</param>
                    <param id="4" name="Client value tag">&quot;aimx&quot;</param>
                </action>
                <action id="12" name="Sync instance variable" sid="9977460682524711" type="Multiplayer">
                    <param id="0" name="Object">Gracz</param>
                    <param id="1" name="Instance variable">Gracz|aimY</param>
                    <param id="2" name="Precision">2</param>
                    <param id="3" name="Interpolation">1</param>
                    <param id="4" name="Client value tag">&quot;aimy&quot;</param>
                </action>
                <action id="12" name="Sync instance variable" sid="4288332717452617" type="Multiplayer">
                    <param id="0" name="Object">Gracz</param>
                    <param id="1" name="Instance variable">Gracz|Input</param>
                    <param id="2" name="Precision">3</param>
                    <param id="3" name="Interpolation">1</param>
                    <param id="4" name="Client value tag">&quot;input&quot;</param>
                </action>
                <action id="0" name="Call function" sid="9905248541542429" type="Function">
                    <param id="0" name="Name">&quot;chat&quot;</param>
                    <param id="1" name="Parameter {n}">&quot;Laczenie z serwerem &quot; &amp;multiplayer.SignallingName</param>
                </action>
            </actions>
        </event-block>
        <event-group description="Sygnałowanie, logowanie na serwerze" sid="6806957315798569" title="Signalling">
            <sub-events>
                <event-block sid="6270828135115465">
                    <conditions>
                        <condition id="2" name="On connected" sid="5697153594844503" type="Multiplayer" />
                    </conditions>
                    <actions>
                        <action id="4" name="Log in" sid="5944486919282338" type="Multiplayer">
                            <param id="0" name="Alias">Myname</param>
                        </action>
                        <action id="0" name="Call function" sid="5184068822326509" type="Function">
                            <param id="0" name="Name">&quot;chat&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;Dolaczono do serwera sygnalowego&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="6348815117946897">
                    <conditions>
                        <condition id="4" name="On logged in" sid="6228505236407368" type="Multiplayer" />
                    </conditions>
                    <actions>
                        <action id="5" name="Join room" sid="6049399753342357" type="Multiplayer">
                            <param id="0" name="Game">GAME_NAME</param>
                            <param id="1" name="Instance">GAME_INSTANCE</param>
                            <param id="2" name="Room">GAME_ROOM</param>
                            <param id="3" name="Max peers">0</param>
                        </action>
                        <action id="0" name="Call function" sid="8270916677914994" type="Function">
                            <param id="0" name="Name">&quot;chat&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;Zalogowano do serwera sygnalowego&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="5480853754846892">
                    <conditions>
                        <condition id="5" name="On joined room" sid="8268686203064732" type="Multiplayer" />
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="9481341803581336" type="Function">
                            <param id="0" name="Name">&quot;chat&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;Dolaczono do pokoju, alias: &quot; &amp;multiplayer.MyAlias</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="2692538713677893">
                            <conditions>
                                <condition id="10" name="Is host" sid="478796509255011" type="Multiplayer" />
                            </conditions>
                            <actions>
                                <action id="-12" name="Set group active" sid="5004302565812575" type="System">
                                    <param id="0" name="Group name">&quot;Host&quot;</param>
                                    <param id="1" name="State">1</param>
                                </action>
                                <action id="-10" name="Set value" sid="6280462648296385" type="Gracz">
                                    <param id="0" name="Instance variable">peerid</param>
                                    <param id="1" name="Value">Multiplayer.MyID</param>
                                </action>
                                <action id="13" name="Associate object with peer" sid="1451444947094463" type="Multiplayer">
                                    <param id="0" name="Object">Gracz</param>
                                    <param id="1" name="Peer ID">Multiplayer.MyID</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="5355030244958892">
                            <conditions>
                                <condition id="10" inverted="1" name="Is host" sid="15933177712766" type="Multiplayer" />
                            </conditions>
                            <actions>
                                <action id="-12" name="Set group active" sid="6689301689991077" type="System">
                                    <param id="0" name="Group name">&quot;Peer&quot;</param>
                                    <param id="1" name="State">1</param>
                                </action>
                                <action id="-9" name="Destroy" sid="2397124828600547" type="Gracz" />
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" inactive="1" sid="3011960123564868" title="Host">
            <sub-events>
                <event-group description="Przetwarzanie inputow" sid="3475179535277555" title="Ruch">
                    <sub-events>
                        <event-block sid="2012949872586218">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="6657810605553687" type="Gracz">
                                    <param id="0" name="Instance variable">peerid</param>
                                    <param id="1" name="Comparison">1</param>
                                    <param id="2" name="Value">Multiplayer.MyID</param>
                                </condition>
                                <condition id="-11" name="For Each" sid="4411139588083535" type="System">
                                    <param id="0" name="Object">Gracz</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="1693904004374316" type="Gracz">
                                    <param id="0" name="Instance variable">aimX</param>
                                    <param id="1" name="Value">Multiplayer.PeerState(Gracz.peerid, &quot;aimx&quot;)</param>
                                </action>
                                <action id="-10" name="Set value" sid="6055225388416653" type="Gracz">
                                    <param id="0" name="Instance variable">aimY</param>
                                    <param id="1" name="Value">Multiplayer.PeerState(Gracz.peerid, &quot;aimy&quot;)</param>
                                </action>
                                <action id="-10" name="Set value" sid="4823320412468678" type="Gracz">
                                    <param id="0" name="Instance variable">Input</param>
                                    <param id="1" name="Value">Multiplayer.PeerState(Gracz.peerid, &quot;input&quot;)</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="8660530557031895">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="8000568296397095" type="System">
                                            <param id="0" name="First value">getbit(Gracz.Input,0)</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Second value">1</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action behavior="8Direction" id="7" name="Simulate control" sid="3432166388235771" type="Gracz">
                                            <param id="0" name="Control">2</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="7974832778512376">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="9562635199197843" type="System">
                                            <param id="0" name="First value">getbit(Gracz.Input,1)</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Second value">1</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action behavior="8Direction" id="7" name="Simulate control" sid="7449600177217908" type="Gracz">
                                            <param id="0" name="Control">3</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="2891249431112053">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="3717790533887267" type="System">
                                            <param id="0" name="First value">getbit(Gracz.Input,2)</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Second value">1</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action behavior="8Direction" id="7" name="Simulate control" sid="4287823857203347" type="Gracz">
                                            <param id="0" name="Control">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="3158143048361213">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="2592078402378965" type="System">
                                            <param id="0" name="First value">getbit(Gracz.Input,3)</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Second value">1</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action behavior="8Direction" id="7" name="Simulate control" sid="2574942123381803" type="Gracz">
                                            <param id="0" name="Control">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-group collapsed="1" description="Ruch hosta" sid="6275370267556177" title="Hosty">
                            <sub-events>
                                <event-block sid="389482945461162">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="64218287107948" type="Gracz">
                                            <param id="0" name="Instance variable">peerid</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">Multiplayer.MyID</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-22" name="Set angle toward position" sid="8143256211532381" type="Gracz">
                                            <param id="0" name="X">mouse.X</param>
                                            <param id="1" name="Y">mouse.Y</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="9484846228786165">
                                            <conditions>
                                                <condition id="2" name="Key is down" sid="2361175124359656" type="Keyboard">
                                                    <param id="0" name="Key">87 (W)</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action behavior="8Direction" id="7" name="Simulate control" sid="6845135585047225" type="Gracz">
                                                    <param id="0" name="Control">2</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="2732731896977899">
                                            <conditions>
                                                <condition id="2" name="Key is down" sid="5858201937823349" type="Keyboard">
                                                    <param id="0" name="Key">83 (S)</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action behavior="8Direction" id="7" name="Simulate control" sid="8870658364342078" type="Gracz">
                                                    <param id="0" name="Control">3</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="2071929129464796">
                                            <conditions>
                                                <condition id="2" name="Key is down" sid="7296444707458113" type="Keyboard">
                                                    <param id="0" name="Key">65 (A)</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action behavior="8Direction" id="7" name="Simulate control" sid="112384967291749" type="Gracz">
                                                    <param id="0" name="Control">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="4921967320659783">
                                            <conditions>
                                                <condition id="2" name="Key is down" sid="8688285478837894" type="Keyboard">
                                                    <param id="0" name="Key">68 (D)</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action behavior="8Direction" id="7" name="Simulate control" sid="3802608171998102" type="Gracz">
                                                    <param id="0" name="Control">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-group>
                    </sub-events>
                </event-group>
                <event-block sid="3797964670126116">
                    <conditions>
                        <condition id="11" name="On peer connected" sid="8301668725243685" type="Multiplayer" />
                    </conditions>
                    <actions>
                        <action id="-3" name="Create object" sid="1584353909267468" type="System">
                            <param id="0" name="Object to create">Gracz</param>
                            <param id="1" name="Layer">0</param>
                            <param id="2" name="X">50</param>
                            <param id="3" name="Y">50</param>
                        </action>
                        <action id="-10" name="Set value" sid="6205407216498941" type="Gracz">
                            <param id="0" name="Instance variable">peerid</param>
                            <param id="1" name="Value">Multiplayer.PeerID</param>
                        </action>
                        <action id="13" name="Associate object with peer" sid="8427513241266863" type="Multiplayer">
                            <param id="0" name="Object">Gracz</param>
                            <param id="1" name="Peer ID">Multiplayer.PeerID</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" inactive="1" sid="9642298604554555" title="Peer">
            <sub-events>
                <comment>0 - falsz, 1 - prawda&#x0D;&#x0A;0 - w gore&#x0D;&#x0A;1 - w dol&#x0D;&#x0A;2 - w lewo&#x0D;&#x0A;3 - w prawo&#x0D;&#x0A;4 - lmb</comment>
                <event-block sid="6133589175984286">
                    <conditions>
                        <condition id="17" name="On client update" sid="5666513683723343" type="Multiplayer" />
                        <condition id="-7" name="Compare instance variable" sid="8968518402942169" type="Gracz">
                            <param id="0" name="Instance variable">peerid</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">Multiplayer.MyID</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="14" name="Set client state" sid="3829156783388833" type="Multiplayer">
                            <param id="0" name="Tag">&quot;aimx&quot;</param>
                            <param id="1" name="Value">mouse.X</param>
                        </action>
                        <action id="14" name="Set client state" sid="1610671376060228" type="Multiplayer">
                            <param id="0" name="Tag">&quot;aimy&quot;</param>
                            <param id="1" name="Value">mouse.y</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="1279851491812152">
                            <conditions>
                                <condition id="2" name="Key is down" sid="5679838641477071" type="Keyboard">
                                    <param id="0" name="Key">87 (W)</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="6111137074898019" type="Gracz">
                                    <param id="0" name="Instance variable">Input</param>
                                    <param id="1" name="Value">setbit(Self.Input, 0, 1)</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="4076192863152426">
                            <conditions>
                                <condition id="-22" name="Else" sid="7243241968999907" type="System" />
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="2708749059795466" type="Gracz">
                                    <param id="0" name="Instance variable">Input</param>
                                    <param id="1" name="Value">setbit(Self.Input, 0, 0)</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="5244407260577878">
                            <conditions>
                                <condition id="2" name="Key is down" sid="3533485028321829" type="Keyboard">
                                    <param id="0" name="Key">83 (S)</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="2555950550767469" type="Gracz">
                                    <param id="0" name="Instance variable">Input</param>
                                    <param id="1" name="Value">setbit(Self.Input, 1, 1)</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="7600514397627048">
                            <conditions>
                                <condition id="-22" name="Else" sid="4825851626532611" type="System" />
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="3009930249713137" type="Gracz">
                                    <param id="0" name="Instance variable">Input</param>
                                    <param id="1" name="Value">setbit(Self.Input, 1, 0)</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="6275297999552206">
                            <conditions>
                                <condition id="2" name="Key is down" sid="6111593048616115" type="Keyboard">
                                    <param id="0" name="Key">65 (A)</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="2174900303626267" type="Gracz">
                                    <param id="0" name="Instance variable">Input</param>
                                    <param id="1" name="Value">setbit(Self.Input, 2, 1)</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="6355572441574712">
                            <conditions>
                                <condition id="-22" name="Else" sid="4199821655600983" type="System" />
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="7179248814452946" type="Gracz">
                                    <param id="0" name="Instance variable">Input</param>
                                    <param id="1" name="Value">setbit(Self.Input, 2, 0)</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="9341115960818796">
                            <conditions>
                                <condition id="2" name="Key is down" sid="6028829684744777" type="Keyboard">
                                    <param id="0" name="Key">68 (D)</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="5330942027721472" type="Gracz">
                                    <param id="0" name="Instance variable">Input</param>
                                    <param id="1" name="Value">setbit(Self.Input, 3, 1)</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="2708013364932198">
                            <conditions>
                                <condition id="-22" name="Else" sid="8583043563363985" type="System" />
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="2671070330793416" type="Gracz">
                                    <param id="0" name="Instance variable">Input</param>
                                    <param id="1" name="Value">setbit(Self.Input, 3, 0)</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="475178189653526">
                            <conditions>
                                <condition id="2" name="Mouse button is down" sid="2713227798064338" type="Mouse">
                                    <param id="0" name="Mouse button">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="3557528611114232" type="Gracz">
                                    <param id="0" name="Instance variable">Input</param>
                                    <param id="1" name="Value">setbit(Self.Input, 4, 1)</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="7353925610352213">
                            <conditions>
                                <condition id="-22" name="Else" sid="979225308023159" type="System" />
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="3568837070481165" type="Gracz">
                                    <param id="0" name="Instance variable">Input</param>
                                    <param id="1" name="Value">setbit(Self.Input, 4, 0)</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="8685617278059015">
                            <conditions />
                            <actions>
                                <action id="14" name="Set client state" sid="11818117809603" type="Multiplayer">
                                    <param id="0" name="Tag">&quot;input&quot;</param>
                                    <param id="1" name="Value">Gracz.Input</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="6657550015144266">
                    <conditions>
                        <condition id="-18" name="On created" sid="8376816120441055" type="Gracz" />
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="160660037543519" type="Gracz">
                            <param id="0" name="Instance variable">peerid</param>
                            <param id="1" name="Value">Multiplayer.PeerID</param>
                        </action>
                        <action id="13" name="Associate object with peer" sid="3707647655909611" type="Multiplayer">
                            <param id="0" name="Object">Gracz</param>
                            <param id="1" name="Peer ID">Multiplayer.PeerID</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="Peer i Host" sid="9395126084642041" title="Both">
            <sub-events>
                <event-block sid="2414182989916798">
                    <conditions>
                        <condition id="0" name="On function" sid="7220101698433719" type="Function">
                            <param id="0" name="Name">&quot;log&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="1" name="Append text" sid="3501570727657279" type="Text">
                            <param id="0" name="Text">function.param(0) &amp;newline</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="6409330453651282">
                    <conditions>
                        <condition id="11" name="On peer connected" sid="3720463476085611" type="Multiplayer" />
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="7135109484119264" type="Function">
                            <param id="0" name="Name">&quot;chat&quot;</param>
                            <param id="1" name="Parameter {n}">multiplayer.peeralias &amp;&quot; wszedl do pokoju&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="3638534115438381">
                    <conditions>
                        <condition id="13" name="On peer disconnected" sid="7986204831371365" type="Multiplayer" />
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="9627028363585656" type="Function">
                            <param id="0" name="Name">&quot;chat&quot;</param>
                            <param id="1" name="Parameter {n}">multiplayer.peeralias &amp;&quot; wyszedl z pokoju&quot;</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
